// app.min.js ~> entry point

import "./routes/app.routes.js"

// 1. Inicializa o EmailJS com a Public Key
  // Isso deve ser feito APENAS UMA VEZ.
  emailjs.init({
    publicKey: "RovmSP9OX-tRE3sRi", 
  });

  // 2. Função para lidar com o envio do formulário
  window.onload = function() {
    document.getElementById('contact-form').addEventListener('submit', function(event) {
      event.preventDefault(); // Impede o envio padrão do formulário (que recarregaria a página)

      const feedback = document.getElementById('feedback-message');
      feedback.textContent = 'Enviando...';
      feedback.style.color = 'blue';

      // 3. Envia o formulário usando o EmailJS
      emailjs.sendForm('service_te9qxt9', 'template_aceb8nh', this)
        .then(() => {
          feedback.textContent = 'Mensagem enviada com sucesso!';
          feedback.style.color = 'green';
          this.reset(); // Limpa o formulário após o sucesso
        }, (error) => {
          feedback.textContent = 'Falha ao enviar. Tente novamente.';
          feedback.style.color = 'red';
          console.error('FAILED...', error);
        });
    });
  }